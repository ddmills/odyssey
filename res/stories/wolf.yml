story:
  name: Kill wolf

  state:
  - key: poi
    type: POINT_OF_INTEREST
  - key: wolf
    type: ENTITY
  - key: wolf_is_dead
    type: BOOL
    value: false

  triggers:
  - key: wolf_is_dead
    type: ENTITY_DEATH
    entity: wolf
    actions:
      - type: SET_STATE
        state: wolf_is_dead
        value: true

  - key: villager_dialog
    type: DIALOG_ANY
    target: villager
    conditions:
      - type: IN_POI
        poi: poi
    actions:
      - type: NODE_GOTO
        node: chat_villager

  start: setup

  nodes:
  - key: setup
    type: ACTION
    actions:
      - type: SET_STATE
        state: poi
        value: ESPERLOOSA
      - type: SPAWN
        spawnable: WOLF
        settings:
          - type: NEAR_POI
            poi: poi
        store: wolf
    nextNode: default

  - key: default
    type: NONE

  - key: chat_villager
    type: DIALOG
    text: "There is a wolf terrorizing the town!"
    actions:
      - type: JOURNAL
        entries:
          - "You learn of a wolf terrorizing the villagers of [poi.name]"
    options:
      - text: "Tell me more"
        response: "It roams the woods just [cardinal(poi, wolf)] of here."
        actions:
        - type: JOURNAL
          entries:
            - "The wolf roams the woods just [cardinal(poi, wolf)] of [poi.name]"
        nextNode: chat_villager

      - text: "I'm on it."
        response: Good luck.
        nextNode: default

      - text: "It is vanquished!"
        response: "You're the best!"
        conditions:
          - state: wolf_is_dead
        nextNode: end
